<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Instagram Order Form</title>
<style>
/* ===== Scrolling Banner ===== */
.scrolling-banner{
  position:fixed; top:60px; left:0; width:100%;
  background:#000; color:#fff; font-weight:bold; font-size:16px;
  white-space:nowrap; overflow:hidden; z-index:9999; padding:10px 0;
  border-top:2px solid #ffeb3b; border-bottom:2px solid #ffeb3b;
}
.scrolling-banner span{ display:inline-block; padding-left:100%;
  animation:scroll-left 20s linear infinite;
}
@keyframes scroll-left{ 0%{transform:translateX(0)} 100%{transform:translateX(-100%)} }

/* Banner overlap fix */
body{ margin-top:120px; font-family: Arial, sans-serif; background:#f7f7f7; }

/* ===== Layout ===== */
.container{ max-width:700px; margin:20px auto; padding:16px; background:#fff; border-radius:10px; box-shadow:0 4px 20px rgba(0,0,0,.06); }
.container h2{ text-align:center; color:#333; }

/* ===== Form ===== */
.form-row{ margin:10px 0; }
label{ display:block; margin-bottom:6px; font-weight:600; }
input, select{ width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; }
#details{ background:#f3f3f3; border-radius:8px; margin:10px 0 15px; padding:10px; font-weight:600; }

/* ===== Buttons ===== */
.btn{ display:inline-block; padding:12px 20px; border:0; border-radius:8px; color:#fff; cursor:pointer; font-size:16px; }
.btn-primary{ background:#25d366; }   /* WhatsApp */
.btn-upi{ background:#007bff; }       /* UPI */
.btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Floating call button */
.floating-call{
  position:fixed; left:20px; bottom:20px; z-index:9999;
  background:#28a745; color:#fff; padding:12px 16px; border-radius:50px; box-shadow:0 4px 8px rgba(0,0,0,.3); text-decoration:none;
}

/* ===== Compact Live Popup ===== */
#popup{
  position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
  background:#007bff; color:#fff; padding:6px 12px; border-radius:6px; box-shadow:0 1px 5px rgba(0,0,0,.15);
  display:none; z-index:9999; font-size:13px; font-family:Arial, sans-serif; white-space:nowrap;
}

/* ===== Countdown Timer ===== */
#countdown-timer{
  position:relative; width:100%; background:#fff4f4; padding:10px; text-align:center;
  font-size:18px; font-weight:bold; color:red; border-bottom:2px dashed #ffcccc; border-radius:8px;
}
footer{ background:#f8f9fa; padding:20px; text-align:center; color:#666; margin-top:20px; border-radius:8px; }
</style>
</head>
<body>

<!-- Scrolling Banner -->
<div class="scrolling-banner">
  <span>💥 Use code AK47 for 10% Discount and Extra 50% Bonus! 🔥 | 🚀 Flowkart Moonstar by Ahsanul Karim | ⏳ Limited Time Offer — Don’t Miss Out!</span>
</div>

<div class="container">
  <h2>📸 Instagram Order Form</h2>

  <div class="form-row">
    <label>📌 Select Service:</label>
    <select id="service" onchange="updateDetails()" required>
      <option value="followers">Instagram Followers</option>
      <option value="likes">Instagram Likes</option>
      <option value="views">Instagram Views</option>
      <option value="reel">Instagram Reel Views</option>
      <option value="comments">Instagram Comments (Package)</option>
    </select>
  </div>

  <div id="details"></div>

  <div class="form-row">
    <label>👤 Your Name:</label>
    <input id="name" type="text" placeholder="Enter your name" required>
  </div>

  <div class="form-row">
    <label>🔗 Link:</label>
    <input id="link" type="text" placeholder="Paste Instagram link" required>
  </div>

  <div class="form-row">
    <label>🔢 Quantity:</label>
    <input id="qty" type="number" min="1" placeholder="Enter quantity" required>
  </div>

  <div class="form-row">
    <label>🏷️ Coupon Code (Optional):</label>
    <input id="coupon" type="text" placeholder="AK47">
  </div>

  <div class="form-row">
    <label>🧾 UTR / Transaction ID:</label>
    <input id="utr" type="text" placeholder="Enter UTR / txn ID" required>
  </div>

  <div class="form-row" style="display:flex; gap:10px; flex-wrap:wrap;">
    <button class="btn btn-upi" onclick="payNow()">Pay Now via UPI</button>
    <button class="btn btn-primary" onclick="sendOrder()">Submit Order</button>
  </div>
</div>

<!-- Floating call button -->
<a class="floating-call" href="tel:+913369028837">📞 Call Now</a>

<!-- Popup sound -->
<audio id="popup-sound" preload="auto" src="https://www.myinstants.com/media/sounds/pop-up-kort.mp3"></audio>

<!-- Compact Live Popup -->
<div id="popup"><span id="popup-text"></span></div>

<!-- Countdown -->
<div id="countdown-timer">
  Special Offer Ends In: <span id="timer">10:00</span>
</div>

<footer>Trusted & Secure • Share with friends • Fast Support 24×7</footer>

<script>
// ===== Pricing text by service =====
function updateDetails(){
  const service = document.getElementById('service').value;
  let priceText;
  if(service === 'followers') priceText = '₹0.50 per 1 follower';
  else if(service === 'likes' || service === 'views' || service === 'reel') priceText = '₹0.30 per 1 like/view';
  else priceText = 'Package price shown after quantity';

  document.getElementById('details').innerHTML = `<p>💰 <b>Price:</b> ${priceText}</p>`;
}
updateDetails();

// ===== Calculate Total =====
function calculateTotal(){
  const service = document.getElementById('service').value;
  const qty = parseInt(document.getElementById('qty').value.trim());
  const coupon = document.getElementById('coupon').value.trim();

  if(!qty || isNaN(qty)) return 0;

  let pricePerUnit = (service === 'followers') ? 0.50 : 0.30;
  let total = pricePerUnit * qty;

  if (coupon.toUpperCase() === 'AK47'){ total = total - (total * 0.10); } // 10% off
  return Number(total.toFixed(2));
}

// ===== UPI Pay =====
function payNow(){
  const total = calculateTotal();
  if(total <= 0){ alert('Please enter a valid quantity.'); return; }

  const upiID = '9954646296-3@ybl'; // <- আপনার UPI ID বসান
  const name  = 'Instagram Order';
  const url = `upi://pay?pa=${upiID}&pn=${encodeURIComponent(name)}&am=${total}&cu=INR`;
  window.location.href = url;
}

// ===== Submit Order via WhatsApp Cloud API =====
async function sendOrder(){
  const service = document.getElementById('service').value;
  const name = document.getElementById('name').value.trim();
  const link = document.getElementById('link').value.trim();
  const qty = parseInt(document.getElementById('qty').value.trim());
  const coupon = document.getElementById('coupon').value.trim();
  const utr = document.getElementById('utr').value.trim();

  if(!name || !link || !qty || !utr){
    alert('❌ Please fill in all required fields.');
    return;
  }

  const finalPrice = calculateTotal();
  const serviceName =
    service === 'followers' ? 'Instagram Followers' :
    service === 'likes' ? 'Instagram Likes' :
    service === 'views' ? 'Instagram Views' :
    service === 'reel' ? 'Instagram Reel Views' : 'Instagram Comments';

  const msg = `*New Instagram Order!*\n\n` +
              `*Service:* ${serviceName}\n` +
              `💰 *Total Price:* ₹${finalPrice}\n` +
              `👤 *Name:* ${name}\n` +
              `🔗 *Link:* ${link}\n` +
              `🔢 *Quantity:* ${qty}\n` +
              `🏷️ *Coupon:* ${coupon || 'None'}\n` +
              `🧾 *UTR:* ${utr}`;

  try {
    const response = await fetch("https://graph.facebook.com/v22.0/748488321686976/messages", {
      method: "POST",
      headers: {
        "Authorization": "Bearer EAAU3R6Wfcg8BPRwgbx8GWL90oCu8D5KNXWuKzQHUo1AdhiTiegdIHz7wjNWXAWsss7sVeGDUwu24oZCyWW34vtTqQz9SYe4MylZCLx9GPXkRgN8EYZBzVfETKJM35UdXRUMl5PXU6YO4nmfUIj4RbGQ73Dw2qgQgfHmeeVYOmk8stHTcALPAKsJZChVb5Anmzd4ZBGBOJWHrNCvDZBAprsx5kbhvBk3Vk4pFEF18JPG8MZD",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        messaging_product: "whatsapp",
        to: "919954646296",   // আপনার WhatsApp নাম্বার (country code সহ)
        type: "text",
        text: { body: msg }
      })
    });

    const data = await response.json();
    console.log(data);

    if(data.messages){
      alert("✅ Order submitted successfully via WhatsApp API!");
    } else {
      alert("⚠️ API Error: " + JSON.stringify(data));
    }
  } catch(err){
    console.error(err);
    alert("❌ Network error sending order.");
  }
}

// ===== Compact Live Popup =====
const names = [
 "Ravi from Kolkata","Sneha from Assam","Anil from Jharkhand","Priya from Bihar","Vikram from Odisha",
 "Tina from Pune","Nisha from Indore","Amit from Lucknow","Deepa from Varanasi","Farhan from Aligarh",
 "Lata from Imphal","Rahul from Shillong","Zia from Hailakandi","Suman from Alwar","Arnav from Jodhpur",
 "Mehul from Udaipur","Ramesh from Raipur","Nitin from Andaman","Payal from Vadodara","Ritika from Pakur",
 "Kabir from Delhi","Tania from Sylhet","Mehedi from Rajshahi","Rupa from Comilla","Mahi from Noakhali",
 "Shuvo from Khulna","Rima from Bogura","Lina from Jaipur","Arif from Jessore","Isha from Chandigarh"
];
const actions = [
 "just buy 5k Followers","just got 10k Views","just ordered 1k Likes",
 "just added 2k Followers","just purchase grabbed 500 Comments"
];

function showPopup(){
  const name = names[Math.floor(Math.random()*names.length)];
  const action = actions[Math.floor(Math.random()*actions.length)];
  const popup = document.getElementById('popup');
  const popupText = document.getElementById('popup-text');
  const sound = document.getElementById('popup-sound');

  popupText.textContent = `${name} ${action}`;
  popup.style.display = 'inline-block';
  try{ sound.currentTime = 0; sound.play(); }catch(e){}
  setTimeout(()=>{ popup.style.display = 'none'; }, 2500);
}
setInterval(showPopup, 3000);

// ===== 10-minute Countdown =====
(function(){
  let duration = 10*60; // seconds
  const timerDisplay = document.getElementById('timer');

  function updateTimer(){
    const minutes = Math.floor(duration/60);
    const seconds = duration % 60;
    timerDisplay.textContent = `${minutes<10?'0':''}${minutes}:${seconds<10?'0':''}${seconds}`;
    duration--;
    if(duration < 0){ clearInterval(timerInterval); timerDisplay.textContent = 'EXPIRED'; }
  }
  updateTimer();
  const timerInterval = setInterval(updateTimer, 1000);
})();
</script>

</body>
</html>
